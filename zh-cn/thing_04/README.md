# 自动化你的编码标准

你可能也有同感. 在项目开始时, 每个人都有很多好想法 - 称之为“新项目的决议”. 很多时候, 许多这些决议都记录在文件中. 关于代码的那些最终在项目的编码标准中. 在启动会议期间, 首席开发人员会查看文档, 在最好的情况下, 每个人都同意他们会尝试遵循这些文档. 然而, 一旦项目开始, 这些良好的意图就会被抛弃, 一次一个. 当项目最终交付时, 代码看起来像一团糟, 似乎没有人知道这是怎么回事. 

什么时候出错了?可能已经在启动会议上了. 一些项目成员没有注意. 其他人不明白这一点. 更糟糕的是, 一些人不同意并且已经在计划他们的编码标准反叛. 最后, 有些人明白了并且同意了, 但是当项目的压力太高时, 他们不得不放手一搏. 格式良好的代码无法为需要更多功能的客户赢得积分. 此外, 如果编码标准不是自动化的, 那么遵循编码标准可能是一项非常无聊的任务. 只是尝试手工缩进杂乱的课程, 找出适合自己的方法. 

但是, 如果这是一个问题, 为什么我们想要首先有一个编码标准?以统一的方式格式化代码的一个原因是, 没有人可以通过以他或她的私有方式格式化它来“拥有”一段代码. 我们可能希望阻止开发人员使用某些反模式, 以避免一些常见的错误. 总之, 编码标准应该使项目更容易工作, 并保持从开始到结束的开发速度. 接下来, 每个人都应该就编码标准达成一致 - 如果一个开发人员使用三个空格来缩进代码, 那么它就无济于事. 

存在大量可用于生成代码质量报告以及记录和维护编码标准的工具, 但这不是整个解决方案. 它应该是自动化的, 并尽可能强制执行. 这里有一些例子：

- 确保代码格式化是构建过程的一部分, 以便每个人在每次编译代码时自动运行它. 
- 使用静态代码分析工具扫描代码以查找不需要的反模式. 如果找到任何内容, 请中断构建. 
- 学习配置这些工具, 以便您可以扫描自己的, 特定于项目的反模式. 
- 不仅要测量测试覆盖率, 还要自动检查结果. 再次, 如果测试覆盖率太低, 请中断构建. 

尝试为您认为重要的一切做到这一点. 您将无法自动化您真正关心的一切. 至于您无法自动标记或修复的内容, 请将它们视为一组补充自动编码标准的指南, 但要接受您和您的同事可能不会如此努力地遵循它们. 

最后, 编码标准应该是动态的而不是静态的. 随着项目的发展, 项目需求的变化, 以及最初可能看起来很聪明的需求, 在几个月之后并不一定是智能的. 

作者: [Filip van Laenen](http://programmer.97things.oreilly.com/wiki/index.php/Filip_van_Laenen)

翻译: [Amao Zhao](https://blog.amaozhao.com)