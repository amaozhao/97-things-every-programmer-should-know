# 小心分享

这是我在公司的第一个项目. 我刚刚完成了学位, 并且急于证明自己, 每天都要通过现有的代码. 当我完成我的第一个功能时, 我特别注意将我学到的所有内容 - 评论, 记录, 在可能的情况下将共享代码提取到库中, 以及工作. 我认为准备好的代码审查是一次粗鲁的觉醒 - 重用是不受欢迎的！

怎么会这样? 整个大学的重用被认为是高质量软件工程的缩影. 我读过的所有文章, 教科书, 教我的经验丰富的软件专业人士. 这一切都错了吗? 

事实证明, 我错过了一些关键的东西. 

上下文语境. 

系统的两个完全不同的部分以相同的方式执行某些逻辑的事实意味着比我想象的要少. 直到我拿出那些共享代码库, 这些部分并没有相互依赖. 每个人都可以独立发展. 每个人都可以改变其逻辑, 以适应系统不断变化的商业环境的需求. 这四行类似代码是偶然的 - 时间异常, 巧合. 也就是说, 直到我出现. 

我创建的共享代码库将每只脚的鞋带相互绑定. 如果没有先与另一个同步, 就无法实现一个业务域的步骤. 这些独立功能的维护成本过去可以忽略不计, 但是通用库需要进行更多的测试. 

虽然我减少了系统中代码行的绝对数量, 但我增加了依赖项的数量. 这些依赖关系的背景是至关重要的 - 如果它们是本地化的, 它可能是合理的并具有一些积极的价值. 当这些依赖关系没有得到控制时, 即使代码本身看起来很好, 它们的卷须也会纠缠系统的大问题. 

这些错误是阴险的, 因为它们的核心听起来是个好主意. 在适当的环境中应用时, 这些技术很有价值. 在错误的背景下, 它们会增加成本而不是价值. 当进入现有的代码库而不了解将使用各个部分的上下文时, 我现在对于共享的内容要小心得多. 

Beware the share. Check your context. Only then, proceed.(小心分享. 检查你的背景. 只有这样, 继续.)

By [Udi Dahan](http://programmer.97things.oreilly.com/wiki/index.php/Udi_Dahan)

翻译: [Amao Zhao](https://blog.amaozhao.com)